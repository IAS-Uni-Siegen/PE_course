%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Begin exercise %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ex{Rectifiers}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Task 1: M3C converter at a RL-load                     %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\task{M3C converter at a RL-load}
A controlled three-pulse midpoint circuit feeds an ohmic-inductive load. The load inductance $L$ is large, such that a pure direct current $I_\mathrm{2}$ is taken from the converter. The load resistance is $R = \SI{5}{\Omega}$. The converter transformer 
is connected to the symmetrical three-phase network with $U_\mathrm{N} = \SI{\nicefrac{230}{400}}{\volt} $ (effective value of phase voltage / line-to-line voltage). The secondary side phase voltages point an effective value of 
$U_\mathrm{1i} = \SI{230}{\volt}, \forall i=a,b,c$. The thyristors and commutation can be assumed to be ideal.

\input{fig/ex06/Fig_M3C_Converter_With_RL_Load.tex}


% Subtask1
\subtask{Calculate the firing angle $\alpha$, such that an active power of $P = \SI{6}{\kilo\watt}$ is delivered to the load. How big is the load current $i_\mathrm{2} = I_\mathrm{2}$?}
% Subtask2
\subtask{Draw the normalized control characteristic curve $\nicefrac{U_\mathrm{2}(\alpha)}{U_\mathrm{2}(\alpha=0)}$ and plot the  operating point $P = \SI{6}{\kilo\watt}$ at $R = \SI{5}{\Omega}$.}
% Subtask3
\subtask{Draw the curve of the converters' output voltage $u_\mathrm{2}(t)$ for the calculated control angle $\alpha$ from subtask 6.1.1.}
\subtask{Calculate the effective value $I^\mathrm{(1)}_\mathrm{1a}$ of the fundamental current component $i^\mathrm{(1)}_\mathrm{1a}(t)$ and draw that fundamental component. How big is the phase shift $\varphi_\mathrm{1a}$ between $u_\mathrm{1a}(t)$ and $i^\mathrm{(1)}_\mathrm{1a}(t)$.}
\subtask{Calculate the fundamental reactive power $Q^\mathrm{(1)}$.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Task 2: B6C converter at a motor load                   %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\task{B6C converter at a motor load}

In a lifting drive, a permanent magnet DC motor is supplied by a B6C converter circuit. The B6C-topology is connected to the three-phase grid.
With the assumption of $L\rightarrow\infty$ the motor operates with constant nominal current and constant nominal voltage when lifting as well as lowering the load.
This corresponds to a terminal voltage of $u_\mathrm{mot,up}(t)=U_\mathrm{mot}$ when lifting the load and $u_\mathrm{mot,down}(t)=-U_\mathrm{mot}$ when lowering it.
In order to generate the necessary torque, the motor absorbs the current $i_\mathrm{mot}(t)=I_\mathrm{mot}$.

\input{fig/ex06/Fig_B6C_ConverterWithMotorLoad}

\begin{table}[ht]
    \centering  % Zentriert die Tabelle
    \begin{tabular}{ll}
        \toprule
        Input voltages: & three-phase grid $U_\mathrm{1}=\SI{230}{\volt}$ (phase voltage) \\
                        & $U_\mathrm{1,LL} = \SI{400}{\volt}$ (line-to-line voltage)\\
        Nom. motor current: & $I_{\mathrm{mot}} = \SI{20}{\ampere}$ \\
        Nom. motor voltage: & $U_\mathrm{mot} = \SI{466}{\volt}$ \\ 
        Grid frequency: & $f= \SI{50}{\hertz}$ \\ 
        \bottomrule
    \end{tabular}
    \caption{Parameters of the lifting drive with B6C converter.}  
    \label{table:ex06_Task2_ParametersOfTheCircuit}
\end{table}


% Subtask1
\subtask{Calculate the firing angle $\alpha_\mathrm{up}$ required for raising and the firing angle $\alpha_\mathrm{down}$ for lowering the load 
to operate the motor at rated voltage.}
%solution
\begin{solutionblock}
    The maximum value of $u_\mathrm{1,LL}(t)$ is calculated by
    \begin{equation} 
        \hat{u}_\mathrm{1,LL}=\sqrt{3} \sqrt{2} \cdot U_\mathrm{1}= \sqrt{2} \sqrt{2} \cdot \SI{230}{\volt}=\SI{563}{\volt}.
        \label{eq:ex06t2_u1n_max}
    \end{equation}
    The voltage $u_\mathrm{2}(t)$ is calculated by
    \begin{equation} 
        u_\mathrm{2}(t) = \hat{u}_\mathrm{1,LL} \frac{\pi}{p}\sin(\frac{p}{\pi}) \cos(\alpha).
        \label{eq:ex06t2_u2_gen}
    \end{equation}
    Solving \eqref{eq:ex06t2_u2_gen} with respect to $\alpha$ results in
    \begin{equation} 
        \alpha = \arccos( \frac{u_\mathrm{2}(t) \cdot p}{\hat{u}_\mathrm{1,LL}\pi \sin(\frac{p}{\pi})}) =
        \begin{cases}
            \alpha_\mathrm{up} = \arccos( \frac{\SI{466}{\volt} \cdot p}{\SI{563}{\volt}\pi \sin(\frac{6}{\pi})})=\SI{30}{\degree}     \\
            \alpha_\mathrm{down} = \arccos( \frac{\SI{-466}{\volt} \cdot p}{\SI{563}{\volt}\pi \sin(\frac{6}{\pi})})=\SI{150}{\degree}    \\
        \end{cases}.
        \label{eq:ex06t2_alpha_gen}
    \end{equation}
\end{solutionblock}

% Subtask2
\subtask{Sketch following signals for the two calculated firing angles $\alpha_\mathrm{up}$ and $\alpha_\mathrm{down}$:
\begin{itemize}
    \item The output voltage $u_\mathrm{2,p}(t)$ and $u_\mathrm{2,m}(t)$ of the two partial converters (reference point is neutral)
          and shade the effective voltage-time area for the two cases (raising and lowering load).
    \item The output voltage $u_\mathrm{2}(t)$ and the mean voltage $\overline{u}_\mathrm{2}$.
    \item The current $i_\mathrm{1a}(t)$ and it's fundamental $i_mathrm{1a}^{(1)}(t)$.
    \item The voltage of thyristor $u_\mathrm{T1}(t)$.
    \item Indicate which thyristors are conducting during a pulse interval within the sketches (raising and lowering load).
\end{itemize}  
}
\begin{solutionblock}
% \input{fig/ex06/sFig_VoltageU2pmUp}

% \input{fig/ex06/sFig_VoltageU2pmDown}

% \input{fig/ex06/sFig_VoltageU2pUpDown}
    The Fourier coefficient for the Cosinus terms are used to calculate the amplitude of the fundamental $i_{1a}^{(1)}(t)$.
    To simplify the calculation the the current signal $i_{1a}(t)$ is shift \SI{270}{\degree} to the left, so that to the left so that it is axisymmetric.
    The integration is performed from \SI{-180}{\degree} to \SI{180}{\degree}:
    
    T is calculated by
    \begin{equation} 
        \hat{u}_\mathrm{1,LL}=\sqrt{3} \sqrt{2} \cdot U_\mathrm{1}= \sqrt{2} \sqrt{2} \cdot \SI{230}{\volt}=\SI{563}{\volt}.
        \label{eq:ex06t2_u1n_max}
    \end{equation}
    The voltage $u_\mathrm{2}(t)$ is calculated by
    \begin{equation} 
        u_\mathrm{2}(t) = \hat{u}_\mathrm{1,LL} \frac{\pi}{p}\sin(\frac{p}{\pi}) \cos(\alpha).
        \label{eq:ex06t2_u2_gen}
    \end{equation}
    Solving \eqref{eq:ex06t2_u2_gen} with respect to $\alpha$ results in
    \begin{equation} 
        \alpha = \arccos( \frac{u_\mathrm{2}(t) \cdot p}{\hat{u}_\mathrm{1,LL}\pi \sin(\frac{p}{\pi})}) =
        \begin{cases}
            \alpha_\mathrm{up} = \arccos( \frac{\SI{466}{\volt} \cdot p}{\SI{563}{\volt}\pi \sin(\frac{6}{\pi})})=\SI{30}{\degree}     \\
            \alpha_\mathrm{down} = \arccos( \frac{\SI{-466}{\volt} \cdot p}{\SI{563}{\volt}\pi \sin(\frac{6}{\pi})})=\SI{150}{\degree}    \\
        \end{cases}.
        \label{eq:ex06t2_alpha_gen}
    \end{equation}
% \input{fig/ex06/sFig_CurrentI1up}

% \input{fig/ex06/sFig_CurrentI1down}

% \input{fig/ex06/sFig_VoltageUT1Up}

% \input{fig/ex06/sFig_VoltageUT1Down}

\end{solutionblock}

% Subtask3
\subtask{Calculate the active power $P$, the fundamental reactive power $Q^\mathrm{(1)}$
and the fundamental apparent power $S^\mathrm{(1)}$ for the two considered operating points. Represent $P$, $Q^\mathrm{(1)}$ and $S^\mathrm{(1)}$ in the complex plane.}

% Subtask4
\subtask{Calculate the fundamental current ratio $g_=\frac{I^\mathrm{(1)}}{I}$ and the power factor $\lambda$ 
as a function for the two considered operating points.}
