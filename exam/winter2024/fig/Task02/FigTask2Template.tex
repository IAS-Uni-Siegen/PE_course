%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SolutionFiguretempate
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{figure}[htb]  
    \begin{center}
        \definecolor{orange}{rgb}{1.0,0.5,0}
        \begin{tikzpicture}
            % groupplot begin
            \begin{groupplot}[group style={
                group size=1 by 7,
                xlabels at=edge bottom,
                y descriptions at=edge left,
                },
                domain=0:15,
                % x/y range adjustment
                xmin=0, xmax=66,
                ymin=-4.5, ymax=4.5,
                samples=500,
                axis y line=center,
                axis x line=middle,
                extra y ticks=0,
                % Label text
                xlabel={$t / \SI{}{\micro\second}$},,
                % Label adjustment
                x label style={at={(axis description cs:1,0.5)},anchor=west},
                y label style={at={(axis description cs:-.05,.97)},anchor=south},
                width=0.95\textwidth,
                height=0.3\textwidth,
                % x-Ticks
                xtick={ 0, 2, 4, 6, 8,10,12,14,16,18,
                        20,22,24,26,28,30,32,34,36,38,
                        40,42,44,46,48,50,52,54,56,58,
                        60,62,64},
                xticklabels={0,,,,,10,,,,,20
                              ,,,,,30,,,,,40
                              ,,,,,50,,,,,60
                              ,,},
                xticklabel style = {yshift=0.1cm,anchor=north},
                % Grid layout
                grid=both,
                grid style={line width=.1pt, draw=gray!10},
                major grid style={line width=.2pt,draw=gray!50},
                ]
                \nextgroupplot[
                    ymin=-3.5, ymax=3.5,
                    samples=500,
                    extra y ticks=0,
                    % x-Label text
                    xlabel={$t / \SI{}{\micro\second}$},,                    
                    % y-Label
                    y label style={at={(axis description cs:-.05,1)},anchor=south},
                    height=0.25\textwidth,
                    ylabel={\color{black}$u(t)/\mathrm{V}$},
                    % y-Ticks
                    ytick={3,2,1,0,-1,-2,-3},
                    yticklabels={3,,,0,,,-3},
                    yticklabel style = {anchor=east},  
                ]
                % Voltage u1a(wt)
                \addplot[black, domain= 0:12,solid,line width=1pt] {x/2-3};
                \addplot[black, domain= 12:24,solid,line width=1pt] {3-(x-12)/2};
                \addplot[black, domain= 24:36,solid,line width=1pt] {(x-24)/2-3};
                \addplot[black, domain= 36:48,solid,line width=1pt] {3-(x-36)/2};
                \addplot[black, domain= 48:60,solid,line width=1pt] {(x-48)/2-3};
                \addplot[black, domain= 60:64,solid,line width=1pt] {3-(x-60)/2};
                % Label for carrier
                \node[scale=0.8] at (axis cs:20,2.5){$\text{Triangular carrier}$};

                % Label for reference voltage
                \node[scale=0.8,color=blue] at (axis cs:48,1.5){$\text{Reference voltage}$};
                \addplot[color=blue,mark=none,solid,line width=1pt] coordinates{
                    (0, 1)
                    (24, 1)
                    (24, -1)
                    (36, -1)
                    (36, 1)
                    (64, 1)
                    };     
   

                \nextgroupplot[
                    ymin=0, ymax=500,
                    samples=500,
                    extra y ticks=0,
                    % x-Label text
                    xlabel={$t / \SI{}{\micro\second}$},,
                    x label style={at={(axis description cs:1,0)},anchor=west},                    
                    % y-Label
                    y label style={at={(axis description cs:-.05,1)},anchor=south},
                    height=0.15\textwidth,
                    ylabel={\color{black}$u_\text{a}(t)/\mathrm{V}$},
                    ytick={0,150,300,450},
                    yticklabels={,,,},
                    yticklabel style = {anchor=east},                        
                    xticklabel style = {yshift=-0.3cm,anchor=north},
                    ];

                \nextgroupplot[
                    ymin=0, ymax=500,
                    samples=500,
                    extra y ticks=0,
                    % x-Label text
                    xlabel={$t / \SI{}{\micro\second}$},,
                    x label style={at={(axis description cs:1,0)},anchor=west},
                    % y-Label
                    y label style={at={(axis description cs:-.05,1)},anchor=south},
                    height=0.15\textwidth,
                    ylabel={\color{black}$u_\text{b}(t)/\mathrm{V}$},
                    ytick={0,150,300,450},
                    yticklabels={,,,},
                    yticklabel style = {anchor=east},                        
                    xticklabel style = {yshift=-0.3cm,anchor=north},
                ];
                \nextgroupplot[
                    ymin=-500, ymax=500,
                    samples=500,
                    extra y ticks=0,
                    % x-Label text
                    xlabel={$t / \SI{}{\micro\second}$},,                    
                    % y-Label
                    y label style={at={(axis description cs:-.05,1)},anchor=south},
                    height=0.25\textwidth,
                    ylabel={\color{black}$u_\text{ab}(t)/\mathrm{V}$},
                    ytick={-450,-300,-150,0,150,300,450},
                    yticklabels={,,,,,,},
                    yticklabel style = {anchor=east},                        
                    xticklabel style = {yshift=-0.3cm,anchor=north},
                ];
                
                \nextgroupplot[
                    ymin=-45, ymax=45,
                    samples=500,
                    extra y ticks=0,
                    % x-Label text
                    xlabel={$t / \SI{}{\micro\second}$},,                    
                    % y-Label
                    y label style={at={(axis description cs:-.05,1)},anchor=south},
                    height=0.25\textwidth,
                    ylabel={\color{black}$i_\text{2}(t)/\mathrm{A}$},
                    ytick={-40,-30,-20,-10,0,10,20,30,40},
                    yticklabels={-40,,-20,,0,,20,,40},
                    yticklabel style = {anchor=east},                        
                ]

                \nextgroupplot[
                    ymin=-45, ymax=45,
                    samples=500,
                    extra y ticks=0,
                    % x-Label text
                    xlabel={$t / \SI{}{\micro\second}$},,                    
                    % y-Label
                    y label style={at={(axis description cs:-.05,1)},anchor=south},
                    height=0.25\textwidth,
                    ylabel={\color{black}$i_\text{1}(t)/\mathrm{A}$},
                    ytick={-40,-30,-20,-10,0,10,20,30,40},
                    yticklabels={-40,,-20,,0,,20,,40},
                    yticklabel style = {anchor=east},                        
                ]

                \nextgroupplot[
                    ymin=0, ymax=1.5,
                    samples=500,
                    extra y ticks=0,
                    % x-Label text
                    x label style={at={(axis description cs:1,0)},anchor=west},
                    xlabel={$t / \SI{}{\micro\second}$},,                    
                    % y-Label
                    height=0.15\textwidth,
                    ytick={0,3},
                    yticklabels={,},
                    yticklabel style = {yshift=-0.2cm,anchor=east},
                    xmajorgrids=false, % Kein Grid auf der x-Achse
                    ymajorgrids=false  % Kein Grid auf der y-Achse
                ]                    
                % Label for the diagram
                \node[scale=0.8] at (axis cs:30,1.3){$\text{Component conduction ranges}$};
            \end{groupplot}
        \end{tikzpicture}
    \end{center}
    \caption{Relevant voltage and current signals of the four-quadrant converter.}
    \label{fig:solutionfigureTemplateTask2}
\end{figure}       
